@model bcpp.Models.MainPageModel
@using bcpp.Helpers
@using System.Globalization;

@{
    WebGrid aGrid = new WebGrid(Model.AModel);
    WebGrid iGrid = new WebGrid(Model.IModel);
    CultureInfo us = new CultureInfo("en-US");
    //string text = toString(Model.IModel.First().datum);
    //string text2 = "1434-09-23T15:16";
    //string format = "yyyy-mm-dd hh:mm:ss";
    TimeSpan span = (Model.IModel.First().datum - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc));
    //DateTime first = DateTime.ParseExact(text2,format,us);
    Console.WriteLine(span);
    
}

<script>

    $(function () {

        var data = [@{foreach (var item in Model.IModel){ @Html.Raw("[")@((item.datum - new DateTime(1970, 1, 1,0,0,0).ToLocalTime()).TotalSeconds); @Html.Raw("000,"); @item.hodnota @Html.Raw("],")}}], StockChart;
        data = data.sort();
        console.log(data);
        $(document).ready(function () {

            $('#index-container').highcharts('StockChart', {

                chart: {
                    
                    zoomType: 'x'
                },

                rangeSelector: {
                    inputBoxWidth: 130,
                    buttons: [{
                        type: 'week',
                        count: 1,
                        text: '1t'
                    }, {
                        type: 'month',
                        count: 1,
                        text: '1m'
                    }, {
                        type: 'month',
                        count: 6,
                        text: '6m'
                    }, {
                        type: 'year',
                        count: 1,
                        text: '1r'
                    },{
                        type: 'year',
                        count: 3,
                        text: '3r'
                    }, {
                        type: 'all',
                        text: 'Vše'
                    }],
                    selected: 3
                },
                xAxis: {
                    type: 'date',
                    labels: { format: "{value:%m %Y}" }
                },

                yAxis: {
                    title: {
                        text: 'Index PX'
                    }
                },

                title: {
                    text: 'Vývoj hodnoty PX index'
                },

                series: [{
                    turboThreshold: 3330,
                    name: 'PX index: ',
                    data: data,
                    tooltip: {
                        valueSuffix: '',
                        labels: { format: "{value:%j. %F %Y}" }
                    },
                }]
            });
        });
    });


</script>

@aGrid.GetHtml(
    tableStyle: "table table-striped table-hover",
    columns:
    aGrid.Columns
    (
        aGrid.Column("nazev", "Název"),
        aGrid.Column("zkratka", "Zkratka")
))

<div id="index-container" style="width:100%; height:400px;"></div>

@iGrid.GetHtml(
    tableStyle: "table table-striped table-hover",
    columns:
    iGrid.Columns
    (
    iGrid.Column("datum", "Datum",format: (item)=>string.Format("{0:dd.MM.yyyy}",item.datum)),
        iGrid.Column("hodnota", "Hodnota")
))
